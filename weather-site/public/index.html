<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es">
<head>
<!-- 2025-08-04 Mon 13:51 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Proyecto ICCD332 Arquitectura de Computadores</title>
<meta name="author" content="Felipe Merino y Uriel Dueñas" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" href="https://cdn.simplecss.org/simple.min.css" />
<script>
  window.MathJax = {
    tex: {
      ams: {
        multlineWidth: '85%'
      },
      tags: 'ams',
      tagSide: 'right',
      tagIndent: '.8em'
    },
    chtml: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    svg: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    output: {
      font: 'mathjax-modern',
      displayOverflow: 'overflow'
    }
  };
</script>

<script
  id="MathJax-script"
  async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">Proyecto ICCD332 Arquitectura de Computadores</h1>
<div id="table-of-contents" role="doc-toc">
<h2>&Iacute;ndice</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org1852491">1. City Weather APP</a>
<ul>
<li><a href="#orgf5e0f43">1.1. Conocimientos adquiridos:</a></li>
<li><a href="#org64a3a5e">1.2. Estructura del proyecto</a></li>
</ul>
</li>
<li><a href="#org1c93cf3">2. Formulación del Problema y Objetivos</a></li>
<li><a href="#orgb24f6f9">3. Metodología y Herramientas</a></li>
<li><a href="#org5c9b357">4. Desarrollo e Implementación</a>
<ul>
<li><a href="#org1bf5289">4.1. Script de Python (<code>main.py</code>)</a></li>
<li><a href="#orge97f349">4.2. Script de Automatización (<code>get-weather.sh</code>)</a></li>
<li><a href="#orgc4ce77d">4.3. Configuración de Crontab</a></li>
</ul>
</li>
<li><a href="#org75a120b">5. Análisis y Visualización de Resultados</a>
<ul>
<li><a href="#orgc55ccdc">5.1. Carga de Datos y Muestra</a></li>
<li><a href="#org15af6be">5.2. Gráfica de Temperatura vs. Tiempo</a></li>
<li><a href="#orgf6f32e7">5.3. Gráfica de Humedad con respecto al tiempo</a></li>
<li><a href="#orgcc5bc74">5.4. Gráfica de Velocidad del Viento con respecto al tiempo</a></li>
</ul>
</li>
<li><a href="#org919c9a2">6. Referencias</a></li>
</ul>
</div>
</div>
<div id="outline-container-org1852491" class="outline-2">
<h2 id="org1852491"><span class="section-number-2">1.</span> City Weather APP</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-orgf5e0f43" class="outline-3">
<h3 id="orgf5e0f43"><span class="section-number-3">1.1.</span> Conocimientos adquiridos:</h3>
<div class="outline-text-3" id="text-1-1">
<ol class="org-ol">
<li>Conocimientos de sistema operativo Linux</li>
<li>Conocimientos de Emacs/Jupyter</li>
<li>Configuración de Entorno para Data Science con Mamba/Anaconda</li>
<li>Literate Programming</li>
</ol>
</div>
</div>

<div id="outline-container-org64a3a5e" class="outline-3">
<h3 id="org64a3a5e"><span class="section-number-3">1.2.</span> Estructura del proyecto</h3>
<div class="outline-text-3" id="text-1-2">
<p>
Estructura final de las carpetas de nuestro proyecto:
</p>

<pre class="example" id="org68f448d">
.
├── CityTemperatureAnalysis1.ipynb
├── CityTemperatureAnalysis1.ipynb:Zone.Identifier
├── Cohete.zip:Zone.Identifier
├── LICENSE
├── README.md
├── climaMelbourne.csv
├── get-weather.sh
├── get-weather.sh:Zone.Identifier
├── get-weather.sh~
├── ini.el_De_Emergencia
│   └── init.el
├── init.el:Zone.Identifier
├── main.py
├── main.py:Zone.Identifier
├── output.log
└── weather-site
    ├── Org-Website.org
    ├── Org-Website.org:Zone.Identifier
    ├── build-site.el
    ├── build.sh
    ├── content
    │   ├── climaMelbourne.csv
    │   ├── climaMelbourne.csv:Zone.Identifier
    │   ├── images
    │   │   ├── humidity_melbourne.png
    │   │   ├── temperature_melbourne.png
    │   │   └── wind_melbourne.png
    │   ├── index.org
    │   ├── index.org:Zone.Identifier
    │   ├── index.org~
    │   ├── index.pdf
    │   └── index.tex
    └── public
        ├── images
        │   ├── humidity_melbourne.png
        │   ├── temperature_melbourne.png
        │   └── wind_melbourne.png
        └── index.html

7 directories, 32 files
</pre>
</div>
</div>
</div>

<div id="outline-container-org1c93cf3" class="outline-2">
<h2 id="org1c93cf3"><span class="section-number-2">2.</span> Formulación del Problema y Objetivos</h2>
<div class="outline-text-2" id="text-2">
<p>
<b><b>Problema:</b></b>
Se desea realizar un registro climatológico de una ciudad
\(\mathcal{C}\). Para esto, escriba un script de Python/Java que permita
obtener datos climatológicos desde el API de <a href="https://openweathermap.org/current#one">openweathermap</a>. El API
hace uso de los valores de latitud \(x\) y longitud \(y\) de la ciudad
\(\mathcal{C}\) para devolver los valores actuales a un tiempo \(t\).
</p>
</div>
</div>



<div id="outline-container-orgb24f6f9" class="outline-2">
<h2 id="orgb24f6f9"><span class="section-number-2">3.</span> Metodología y Herramientas</h2>
<div class="outline-text-2" id="text-3">
<p>
El proyecto se desarrolló siguiendo estos pasos:
</p>

<ol class="org-ol">
<li><b>Obtención de Credenciales</b>: Se generó una clave de API gratuita en el portal de <a href="https://openweathermap.org/current#one">OpenWeatherMap</a>.</li>
<li><b>Desarrollo del Script</b>: Se codificó el script main.py para gestionar las
solicitudes al API y el almacenamiento de datos</li>
<li><b>Automatización</b>: Se configuró el entorno de ejecución con el archivo <code>get-weather.sh</code> y
se programó su ejecución con Crontab</li>
<li><b>Análisis de Datos</b>: Se utilizaron las librerías Pandas y Matplotlib para procesar
y visualizar la información.</li>
</ol>

<p>
Las herramientas clave utilizadas fueron:
</p>
<ul class="org-ul">
<li><b>Lenguaje de Programación</b>: Python 3</li>
<li><b>Librerías</b>: Requests, Pandas, Matplotlib.</li>
<li><b>Entorno</b>: Mamba/Conda sobre Linux (WSL)</li>
<li><b>Automatización</b>: Shell scripting y Crontab</li>
<li><b>Documentación</b>: Emacs Org Mode</li>
</ul>
</div>
</div>

<div id="outline-container-org5c9b357" class="outline-2">
<h2 id="org5c9b357"><span class="section-number-2">4.</span> Desarrollo e Implementación</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org1bf5289" class="outline-3">
<h3 id="org1bf5289"><span class="section-number-3">4.1.</span> Script de Python (<code>main.py</code>)</h3>
<div class="outline-text-3" id="text-4-1">
<p>
El corazón del proyecto es un script de Python que realiza tres tareas principales:
</p>
<ol class="org-ol">
<li><b>Consulta al API</b>: Llama al endpoint de OpenWeatherMap para obtener datos</li>
<li><b>Verificación de Alertas</b>: Revisa los datos recibidos para detectar condiciones climáticas
extremas</li>
<li><b>Escritura en CSV</b>: Almacena los datos relevantes en un archivo <code>climaMelbourne.csv</code>,
añadiendo una nueva fila en cada ejecución sin borrar las anteriores</li>
</ol>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listado de programa 1 </span>Archivo main.py</label><pre class="src src-python"><span style="font-weight: bold;">import</span> csv
<span style="font-weight: bold;">import</span> datetime

<span style="font-weight: bold;">import</span> requests



<span style="font-weight: bold; font-style: italic;">LAT</span> = -37.813061
<span style="font-weight: bold; font-style: italic;">LONGITUDE</span> = 144.944214
<span style="font-weight: bold; font-style: italic;">API_KEY</span> = <span style="font-style: italic;">"d342e18efa48c85976dbaa3493b34dd4"</span>
<span style="font-weight: bold; font-style: italic;">FILE_NAME</span> = <span style="font-style: italic;">"climaMelbourne.csv"</span>
<span style="font-weight: bold; font-style: italic;">BASE_URL</span> = <span style="font-style: italic;">"http://api.openweathermap.org/data/2.5/weather"</span>

<span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">https://iabigdata-soka-4ae9e223e32444ac5ae3d78afbd55fd9aa6da1c19d9679bf.gitlab.io/post/2024-06-06-pia_openweathermap_ex/#:~:text=Este%20sistema%20consulta%20la%20API,clim%C3%A1ticos%20de%20diferentes%20ubicaciones%20y
</span>

<span style="font-weight: bold;">def</span> <span style="font-weight: bold;">get_weather</span>(lat, lon):
    <span style="font-weight: bold; font-style: italic;">url</span> = f<span style="font-style: italic;">"http://api.openweathermap.org/data/2.5/weather?lat=</span>{lat}<span style="font-style: italic;">&amp;lon=</span>{lon}<span style="font-style: italic;">&amp;appid=</span>{API_KEY}<span style="font-style: italic;">&amp;units=metric&amp;lang=es"</span>
    <span style="font-weight: bold;">try</span>:
        <span style="font-weight: bold; font-style: italic;">response</span> = requests.get(url)
        response.raise_for_status()
        <span style="font-weight: bold;">return</span> response.json()
    <span style="font-weight: bold;">except</span> <span style="font-weight: bold; text-decoration: underline;">Exception</span> <span style="font-weight: bold;">as</span> e:
        <span style="font-weight: bold;">print</span>(<span style="font-style: italic;">"Error al obtener clima:"</span>, e)
        <span style="font-weight: bold;">return</span> <span style="font-weight: bold; text-decoration: underline;">None</span>


<span style="font-weight: bold;">def</span> <span style="font-weight: bold;">verificar_alertas</span>(data):
    <span style="font-weight: bold; font-style: italic;">alertas</span> = []  <span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">Lista para almacenar alertas
</span>
    <span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">Verifica si la temperatura supera los 35&#176;C
</span>    <span style="font-weight: bold;">if</span> data[<span style="font-style: italic;">"main"</span>][<span style="font-style: italic;">"temp"</span>] &gt; 35:
        alertas.append(<span style="font-style: italic;">"Alerta de calor extremo"</span>)

    <span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">Verifica si la velocidad del viento supera los 20 m/s
</span>    <span style="font-weight: bold;">if</span> data[<span style="font-style: italic;">"wind"</span>][<span style="font-style: italic;">"speed"</span>] &gt; 20:
        alertas.append(<span style="font-style: italic;">"Alerta de viento fuerte"</span>)

    <span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">Segun entendi pidio para eso, estaba en el json de la pagina para esas horas
</span>    <span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">Verifica si hay datos de lluvia
</span>    <span style="font-style: italic;">"""if "rain" in data and ("1h" in data["rain"]):
        alertas.append("Alerta de lluvia")"""</span>
    <span style="font-weight: bold;">if</span> <span style="font-style: italic;">"rain"</span> <span style="font-weight: bold;">in</span> data <span style="font-weight: bold;">and</span> data[<span style="font-style: italic;">"rain"</span>].get(<span style="font-style: italic;">"1h"</span>, 0) &gt; 0:
        alertas.append(<span style="font-style: italic;">"Alerta de lluvia"</span>)

    <span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">Verificar nieve
</span>    <span style="font-style: italic;">"""if "snow" in data and ("1h" in data["snow"]):
        alertas.append("Alerta de nieve")"""</span>
    <span style="font-weight: bold;">if</span> <span style="font-style: italic;">"snow"</span> <span style="font-weight: bold;">in</span> data <span style="font-weight: bold;">and</span> data[<span style="font-style: italic;">"snow"</span>].get(<span style="font-style: italic;">"1h"</span>, 0) &gt; 0:
        alertas.append(<span style="font-style: italic;">"Alerta de nieve"</span>)

    <span style="font-weight: bold;">return</span> alertas


<span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">https://www.geeksforgeeks.org/python/python-find-current-weather-of-any-city-using-openweathermap-api/
</span>

<span style="font-weight: bold;">def</span> <span style="font-weight: bold;">writeCSV</span>(data, alertas):
    <span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">Encabezados para el archivo CSV
</span>    <span style="font-weight: bold; font-style: italic;">campos</span> = [
        <span style="font-style: italic;">"ciudad"</span>,
        <span style="font-style: italic;">"lat"</span>,
        <span style="font-style: italic;">"lon"</span>,
        <span style="font-style: italic;">"temp"</span>,
        <span style="font-style: italic;">"humedad"</span>,
        <span style="font-style: italic;">"viento"</span>,
        <span style="font-style: italic;">"description"</span>,
        <span style="font-style: italic;">"lluvia"</span>,
        <span style="font-style: italic;">"nieve"</span>,
        <span style="font-style: italic;">"fecha"</span>,
        <span style="font-style: italic;">"alertas"</span>,
    ]

    <span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">Crear archivo con encabezado si a&#250;n no existe
</span>    <span style="font-weight: bold;">try</span>:
        <span style="font-weight: bold;">with</span> <span style="font-weight: bold;">open</span>(FILE_NAME, mode=<span style="font-style: italic;">"x"</span>, newline=<span style="font-style: italic;">""</span>) <span style="font-weight: bold;">as</span> <span style="font-weight: bold;">file</span>:
            <span style="font-weight: bold; font-style: italic;">writer</span> = csv.writer(<span style="font-weight: bold;">file</span>)
            writer.writerow(campos)
    <span style="font-weight: bold;">except</span> <span style="font-weight: bold; text-decoration: underline;">FileExistsError</span>:
        <span style="font-weight: bold;">pass</span>

    <span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">Agregar los datos y alertas en una nueva fila del archivo
</span>    <span style="font-weight: bold;">with</span> <span style="font-weight: bold;">open</span>(FILE_NAME, mode=<span style="font-style: italic;">"a"</span>, newline=<span style="font-style: italic;">""</span>) <span style="font-weight: bold;">as</span> <span style="font-weight: bold;">file</span>:
        <span style="font-weight: bold; font-style: italic;">writer</span> = csv.writer(<span style="font-weight: bold;">file</span>)
        writer.writerow(
            [
                data[<span style="font-style: italic;">"name"</span>],
                LAT,
                LONGITUDE,
                data[<span style="font-style: italic;">"main"</span>][<span style="font-style: italic;">"temp"</span>],
                data[<span style="font-style: italic;">"main"</span>][<span style="font-style: italic;">"humidity"</span>],
                data[<span style="font-style: italic;">"wind"</span>][<span style="font-style: italic;">"speed"</span>],
                data[<span style="font-style: italic;">"weather"</span>][0][<span style="font-style: italic;">"description"</span>],
                data.get(<span style="font-style: italic;">"rain"</span>, {}).get(<span style="font-style: italic;">"1h"</span>, 0),
                data.get(<span style="font-style: italic;">"snow"</span>, {}).get(<span style="font-style: italic;">"1h"</span>, 0),
                datetime.datetime.now().strftime(<span style="font-style: italic;">"%Y-%m-%d %H:%M:%S"</span>),
                <span style="font-style: italic;">"; "</span>.join(alertas),
            ]
        )


<span style="font-weight: bold;">def</span> <span style="font-weight: bold;">main</span>():
    <span style="font-weight: bold;">print</span>(<span style="font-style: italic;">"===== Clima Melbourne ====="</span>)
    <span style="font-weight: bold; font-style: italic;">melbourne_weather</span> = get_weather(LAT, LONGITUDE)
    <span style="font-weight: bold;">if</span> melbourne_weather <span style="font-weight: bold;">and</span> melbourne_weather.get(<span style="font-style: italic;">"cod"</span>) == 200:
        <span style="font-weight: bold; font-style: italic;">alertas</span> = verificar_alertas(melbourne_weather)
        writeCSV(melbourne_weather, alertas)
        <span style="font-weight: bold;">print</span>(f<span style="font-style: italic;">"Datos guardados para </span>{melbourne_weather['name']}<span style="font-style: italic;">"</span>)
        <span style="font-weight: bold;">if</span> alertas:
            <span style="font-weight: bold;">print</span>(<span style="font-style: italic;">"Alertas activadas:"</span>, <span style="font-style: italic;">", "</span>.join(alertas))
    <span style="font-weight: bold;">else</span>:
        <span style="font-weight: bold;">print</span>(<span style="font-style: italic;">"Error: Ciudad no disponible o API KEY inv&#225;lida"</span>)


<span style="font-weight: bold;">if</span> <span style="font-weight: bold;">__name__</span> == <span style="font-style: italic;">"__main__"</span>:
    main()
</pre>
</div>
</div>
</div>


<div id="outline-container-orge97f349" class="outline-3">
<h3 id="orge97f349"><span class="section-number-3">4.2.</span> Script de Automatización (<code>get-weather.sh</code>)</h3>
<div class="outline-text-3" id="text-4-2">
<p>
Para asegurar que el script de Python se ejecute en el entorno de Conda correcto, creamos un script de shell. Este script activa el entorno <code>iccd332</code> y luego ejecuta <code>main.py</code>.
</p>

<pre class="example">
===== Clima Melbourne =====
Datos guardados para Melbourne
</pre>



<p>
Para darle los respectivos permisos de ejecución al archivo se usó:
</p>
</div>
</div>

<div id="outline-container-orgc4ce77d" class="outline-3">
<h3 id="orgc4ce77d"><span class="section-number-3">4.3.</span> Configuración de Crontab</h3>
<div class="outline-text-3" id="text-4-3">
<p>
La automatización final se logra con <code>crontab</code>, el programador de tareas de Linux
Se configuró una tarea para ejecutar <code>get-weather.sh</code> cada 4 minutos.
La salida y los errores se redirigen al archivo <code>output.log</code> para su posterior revisión
</p>


<p>
Para configurar se utiliza el comando:
</p>
<p>
verificamos si se guardó con el comando:
</p>

<pre class="example">
*/4 * * * * cd /home/iccd332/org-ProyectoFinal &amp;&amp; ./get-weather.sh &gt;&gt; output.log 2&gt;&amp;1
</pre>


<p>
Cada asterisco de: * /4 * * * *
Representa:
</p>
<ul class="org-ul">
<li>Minutos (en este caso 4)
<ul class="org-ul">
<li>hora
<ul class="org-ul">
<li>día del mes
<ul class="org-ul">
<li>mes
<ul class="org-ul">
<li>día de la semana</li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
<p>
cd /home/iccd332/org-ProyectoFinal &amp;&amp; ./get-weather.sh
</p>

<p>
se moverá en el directorio y ejecutará el archivo get-weather.sh
</p>

<p>
&gt;&gt; output.log 2&gt;&amp;
</p>

<p>
Se encarga de guardar toda salida que de el programa en el archivo output.log
</p>


<p>
Finalmente, hacemos los cambios en el sitio web con:
</p>
<p>
y lo mostramos con:
</p>
</div>
</div>
</div>
<div id="outline-container-org75a120b" class="outline-2">
<h2 id="org75a120b"><span class="section-number-2">5.</span> Análisis y Visualización de Resultados</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-orgc55ccdc" class="outline-3">
<h3 id="orgc55ccdc"><span class="section-number-3">5.1.</span> Carga de Datos y Muestra</h3>
<div class="outline-text-3" id="text-5-1">
<p>
Primero, cargamos el archivo <code>climaMelbourne.csv</code> en un DataFrame de Pandas para facilitar su manipulación.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listado de programa 2 </span>Carga de datos y verificación de dimensiones</label><pre class="src src-python"><span style="font-weight: bold;">import</span> pandas <span style="font-weight: bold;">as</span> pd

<span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">Lectura del archivo CSV de Melbourne con la ruta absoluta
</span><span style="font-weight: bold; font-style: italic;">df</span> = pd.read_csv(<span style="font-style: italic;">'/home/iccd332/org-ProyectoFinal/climaMelbourne.csv'</span>)

<span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">Se imprime la estructura del DataFrame (filas x columnas)
</span><span style="font-weight: bold;">print</span>(df.shape)
</pre>
</div>

<pre class="example">
(139, 11)
</pre>


<p>
A continuación, mostramos una muestra aleatoria de 10 registros para observar la estructura y variedad de los datos.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listado de programa 3 </span>Generar muestra y guardar en archivo temporal</label><pre class="src src-python"><span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">--- INSTRUCCI&#211;N ---
</span><span style="font-weight: bold;">from</span> tabulate <span style="font-weight: bold;">import</span> tabulate

<span style="font-weight: bold; font-style: italic;">sample_df</span> = df.sample(10)
<span style="font-weight: bold; font-style: italic;">org_table_string</span> = tabulate(sample_df, headers=<span style="font-style: italic;">'keys'</span>, tablefmt=<span style="font-style: italic;">'orgtbl'</span>)

<span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">Guardar la tabla formateada en un archivo temporal
</span><span style="font-weight: bold;">with</span> <span style="font-weight: bold;">open</span>(<span style="font-style: italic;">"/tmp/org_table.txt"</span>, <span style="font-style: italic;">"w"</span>) <span style="font-weight: bold;">as</span> f:
    f.write(org_table_string)
</pre>
</div>


<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listado de programa 4 </span>Muestra aleatoria de 10 registros del DataFrame</label><pre class="src src-sh"><span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">Ejecuto un archivo temporal creado con los datos del DataFrame
</span>cat /tmp/org_table.txt
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-left" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">&#xa0;</th>
<th scope="col" class="org-left">ciudad</th>
<th scope="col" class="org-right">lat</th>
<th scope="col" class="org-right">lon</th>
<th scope="col" class="org-right">temp</th>
<th scope="col" class="org-right">humedad</th>
<th scope="col" class="org-right">viento</th>
<th scope="col" class="org-left">description</th>
<th scope="col" class="org-right">lluvia</th>
<th scope="col" class="org-right">nieve</th>
<th scope="col" class="org-left">fecha</th>
<th scope="col" class="org-right">alertas</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">71</td>
<td class="org-left">Melbourne</td>
<td class="org-right">-37.8131</td>
<td class="org-right">144.944</td>
<td class="org-right">16.21</td>
<td class="org-right">68</td>
<td class="org-right">4.92</td>
<td class="org-left">nubes dispersas</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
<td class="org-left">2025-08-04 09:24:03</td>
<td class="org-right">nan</td>
</tr>

<tr>
<td class="org-right">7</td>
<td class="org-left">Melbourne</td>
<td class="org-right">-37.8131</td>
<td class="org-right">144.944</td>
<td class="org-right">16.65</td>
<td class="org-right">63</td>
<td class="org-right">4.47</td>
<td class="org-left">muy nuboso</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
<td class="org-left">2025-08-03 21:04:17</td>
<td class="org-right">nan</td>
</tr>

<tr>
<td class="org-right">103</td>
<td class="org-left">Melbourne</td>
<td class="org-right">-37.8131</td>
<td class="org-right">144.944</td>
<td class="org-right">11.37</td>
<td class="org-right">87</td>
<td class="org-right">5.14</td>
<td class="org-left">chubasco de ligera intensidad</td>
<td class="org-right">3.58</td>
<td class="org-right">0</td>
<td class="org-left">2025-08-04 11:28:04</td>
<td class="org-right">Alerta de lluvia</td>
</tr>

<tr>
<td class="org-right">92</td>
<td class="org-left">Melbourne</td>
<td class="org-right">-37.8131</td>
<td class="org-right">144.944</td>
<td class="org-right">12.94</td>
<td class="org-right">80</td>
<td class="org-right">8.75</td>
<td class="org-left">lluvia ligera</td>
<td class="org-right">0.56</td>
<td class="org-right">0</td>
<td class="org-left">2025-08-04 10:44:03</td>
<td class="org-right">Alerta de lluvia</td>
</tr>

<tr>
<td class="org-right">84</td>
<td class="org-left">Melbourne</td>
<td class="org-right">-37.8131</td>
<td class="org-right">144.944</td>
<td class="org-right">15.6</td>
<td class="org-right">72</td>
<td class="org-right">6.69</td>
<td class="org-left">lluvia ligera</td>
<td class="org-right">0.13</td>
<td class="org-right">0</td>
<td class="org-left">2025-08-04 10:12:06</td>
<td class="org-right">Alerta de lluvia</td>
</tr>

<tr>
<td class="org-right">61</td>
<td class="org-left">Melbourne</td>
<td class="org-right">-37.8131</td>
<td class="org-right">144.944</td>
<td class="org-right">18.03</td>
<td class="org-right">59</td>
<td class="org-right">10.8</td>
<td class="org-left">muy nuboso</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
<td class="org-left">2025-08-04 00:44:06</td>
<td class="org-right">nan</td>
</tr>

<tr>
<td class="org-right">17</td>
<td class="org-left">Melbourne</td>
<td class="org-right">-37.8131</td>
<td class="org-right">144.944</td>
<td class="org-right">17.3</td>
<td class="org-right">62</td>
<td class="org-right">2.24</td>
<td class="org-left">muy nuboso</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
<td class="org-left">2025-08-03 21:48:07</td>
<td class="org-right">nan</td>
</tr>

<tr>
<td class="org-right">86</td>
<td class="org-left">Melbourne</td>
<td class="org-right">-37.8131</td>
<td class="org-right">144.944</td>
<td class="org-right">14.22</td>
<td class="org-right">76</td>
<td class="org-right">8.75</td>
<td class="org-left">lluvia ligera</td>
<td class="org-right">0.18</td>
<td class="org-right">0</td>
<td class="org-left">2025-08-04 10:20:03</td>
<td class="org-right">Alerta de lluvia</td>
</tr>

<tr>
<td class="org-right">79</td>
<td class="org-left">Melbourne</td>
<td class="org-right">-37.8131</td>
<td class="org-right">144.944</td>
<td class="org-right">15.64</td>
<td class="org-right">71</td>
<td class="org-right">6.69</td>
<td class="org-left">nubes</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
<td class="org-left">2025-08-04 09:52:04</td>
<td class="org-right">nan</td>
</tr>

<tr>
<td class="org-right">77</td>
<td class="org-left">Melbourne</td>
<td class="org-right">-37.8131</td>
<td class="org-right">144.944</td>
<td class="org-right">15.86</td>
<td class="org-right">70</td>
<td class="org-right">6.69</td>
<td class="org-left">nubes</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
<td class="org-left">2025-08-04 09:44:04</td>
<td class="org-right">nan</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org15af6be" class="outline-3">
<h3 id="org15af6be"><span class="section-number-3">5.2.</span> Gráfica de Temperatura vs. Tiempo</h3>
<div class="outline-text-3" id="text-5-2">
<p>
Esta gráfica muestra la fluctuación de la temperatura a lo largo del tiempo.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listado de programa 5 </span>Gráfica de Temperatura vs. Tiempo en Melbourne</label><pre class="src src-python"><span style="font-weight: bold;">import</span> matplotlib.pyplot <span style="font-weight: bold;">as</span> plt
<span style="font-weight: bold;">import</span> matplotlib.dates <span style="font-weight: bold;">as</span> mdates
<span style="font-weight: bold;">import</span> pandas <span style="font-weight: bold;">as</span> pd

<span style="font-weight: bold; font-style: italic;">df</span>[<span style="font-style: italic;">'fecha'</span>] = pd.to_datetime(df[<span style="font-style: italic;">'fecha'</span>])

<span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">Define el tama&#241;o de la figura de salida
</span><span style="font-weight: bold; font-style: italic;">fig</span>, <span style="font-weight: bold; font-style: italic;">ax</span> = plt.subplots(figsize=(10, 6))

<span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">Dibuja las variables fecha y temp
</span>ax.plot(df[<span style="font-style: italic;">'fecha'</span>], df[<span style="font-style: italic;">'temp'</span>], marker=<span style="font-style: italic;">'.'</span>, linestyle=<span style="font-style: italic;">'-'</span>, color=<span style="font-style: italic;">'orangered'</span>)

<span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">ajuste para presentacion de fechas en la imagen
</span>ax.xaxis.set_major_locator(mdates.HourLocator(interval=6))
ax.xaxis.set_major_formatter(mdates.DateFormatter(<span style="font-style: italic;">'%d-%b %H:%M'</span>))

ax.grid(<span style="font-weight: bold; text-decoration: underline;">True</span>, linestyle=<span style="font-style: italic;">'--'</span>, alpha=0.6)

<span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">Titulo que obtiene el nombre de la ciudad del DataFrame
</span>plt.title(f<span style="font-style: italic;">'Temperatura vs. Tiempo en </span>{df["ciudad"].iloc[0]}<span style="font-style: italic;">'</span>)
plt.xlabel(<span style="font-style: italic;">'Fecha y Hora'</span>)
plt.ylabel(<span style="font-style: italic;">'Temperatura (&#176;C)'</span>)

<span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">rotaci&#243;n de las etiquetas 45&#176;
</span>plt.xticks(rotation=45)
fig.tight_layout()

<span style="font-weight: bold; font-style: italic;">fname</span> = <span style="font-style: italic;">'./images/temperature_melbourne.png'</span>
plt.savefig(fname)
fname
</pre>
</div>


<div id="org05719c7" class="figure">
<p><img src="./images/temperature_melbourne.png" alt="temperature_melbourne.png" />
</p>
</div>

<p>
Como el servidor http de emacs se ejecuta desde la carpeta public
es necesario copiar el archivo a la ubicacion public/images
</p>

<div class="org-src-container">
<pre class="src src-shell">cp -rfv ./images/* ../public/images/
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf6f32e7" class="outline-3">
<h3 id="orgf6f32e7"><span class="section-number-3">5.3.</span> Gráfica de Humedad con respecto al tiempo</h3>
<div class="outline-text-3" id="text-5-3">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listado de programa 6 </span>Gráfica de Humedad (%) vs. Tiempo en Melbourne.</label><pre class="src src-python"><span style="font-weight: bold;">import</span> matplotlib.pyplot <span style="font-weight: bold;">as</span> plt
<span style="font-weight: bold;">import</span> matplotlib.dates <span style="font-weight: bold;">as</span> mdates
<span style="font-weight: bold;">import</span> pandas <span style="font-weight: bold;">as</span> pd

<span style="font-weight: bold; font-style: italic;">df</span>[<span style="font-style: italic;">'fecha'</span>] = pd.to_datetime(df[<span style="font-style: italic;">'fecha'</span>])

<span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">Define el tama&#241;o de la figura de salida
</span><span style="font-weight: bold; font-style: italic;">fig</span>, <span style="font-weight: bold; font-style: italic;">ax</span> = plt.subplots(figsize=(10, 6))

<span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">Dibuja las variables fecha y humedad
</span>ax.plot(df[<span style="font-style: italic;">'fecha'</span>], df[<span style="font-style: italic;">'humedad'</span>], marker=<span style="font-style: italic;">'.'</span>, linestyle=<span style="font-style: italic;">'-'</span>, color=<span style="font-style: italic;">'dodgerblue'</span>)

<span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">ajuste para presentacion de fechas en la imagen
</span>ax.xaxis.set_major_locator(mdates.HourLocator(interval=6))
ax.xaxis.set_major_formatter(mdates.DateFormatter(<span style="font-style: italic;">'%d-%b %H:%M'</span>))

ax.grid(<span style="font-weight: bold; text-decoration: underline;">True</span>, linestyle=<span style="font-style: italic;">'--'</span>, alpha=0.6)

<span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">Titulo que obtiene el nombre de la ciudad del DataFrame
</span>plt.title(f<span style="font-style: italic;">'Humedad vs. Tiempo en </span>{df["ciudad"].iloc[0]}<span style="font-style: italic;">'</span>)
plt.xlabel(<span style="font-style: italic;">'Fecha y Hora'</span>)
plt.ylabel(<span style="font-style: italic;">'Humedad Relativa (%)'</span>)

<span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">rotaci&#243;n de las etiquetas 45&#176;
</span>plt.xticks(rotation=45)
fig.tight_layout()

<span style="font-weight: bold; font-style: italic;">fname</span> = <span style="font-style: italic;">'./images/humidity_melbourne.png'</span>
plt.savefig(fname)
fname
</pre>
</div>


<div id="orgc15454d" class="figure">
<p><img src="./images/humidity_melbourne.png" alt="humidity_melbourne.png" />
</p>
</div>

<div class="org-src-container">
<pre class="src src-shell">cp -rfv ./images/* ../public/images/
</pre>
</div>
</div>
</div>


<div id="outline-container-orgcc5bc74" class="outline-3">
<h3 id="orgcc5bc74"><span class="section-number-3">5.4.</span> Gráfica de Velocidad del Viento con respecto al tiempo</h3>
<div class="outline-text-3" id="text-5-4">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listado de programa 7 </span>Gráfica de Velocidad del Viento (m/s) vs. Tiempo en Melbourne.</label><pre class="src src-python"><span style="font-weight: bold;">import</span> matplotlib.pyplot <span style="font-weight: bold;">as</span> plt
<span style="font-weight: bold;">import</span> matplotlib.dates <span style="font-weight: bold;">as</span> mdates
<span style="font-weight: bold;">import</span> pandas <span style="font-weight: bold;">as</span> pd

<span style="font-weight: bold; font-style: italic;">df</span>[<span style="font-style: italic;">'fecha'</span>] = pd.to_datetime(df[<span style="font-style: italic;">'fecha'</span>])

<span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">Define el tama&#241;o de la figura de salida
</span><span style="font-weight: bold; font-style: italic;">fig</span>, <span style="font-weight: bold; font-style: italic;">ax</span> = plt.subplots(figsize=(10, 6))

<span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">Dibuja las variables fecha y viento
</span>ax.plot(df[<span style="font-style: italic;">'fecha'</span>], df[<span style="font-style: italic;">'viento'</span>], marker=<span style="font-style: italic;">'.'</span>, linestyle=<span style="font-style: italic;">'-'</span>, color=<span style="font-style: italic;">'seagreen'</span>)

<span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">ajuste para presentacion de fechas en la imagen
</span>ax.xaxis.set_major_locator(mdates.HourLocator(interval=6))
ax.xaxis.set_major_formatter(mdates.DateFormatter(<span style="font-style: italic;">'%d-%b %H:%M'</span>))

ax.grid(<span style="font-weight: bold; text-decoration: underline;">True</span>, linestyle=<span style="font-style: italic;">'--'</span>, alpha=0.6)

<span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">Titulo que obtiene el nombre de la ciudad del DataFrame
</span>plt.title(f<span style="font-style: italic;">'Velocidad del Viento vs. Tiempo en </span>{df["ciudad"].iloc[0]}<span style="font-style: italic;">'</span>)
plt.xlabel(<span style="font-style: italic;">'Fecha y Hora'</span>)
plt.ylabel(<span style="font-style: italic;">'Viento (m/s)'</span>)

<span style="font-weight: bold; font-style: italic;"># </span><span style="font-weight: bold; font-style: italic;">rotaci&#243;n de las etiquetas 45&#176;
</span>plt.xticks(rotation=45)
fig.tight_layout()

<span style="font-weight: bold; font-style: italic;">fname</span> = <span style="font-style: italic;">'./images/wind_melbourne.png'</span>
plt.savefig(fname)
fname
</pre>
</div>


<div id="orgfdb5e4a" class="figure">
<p><img src="./images/wind_melbourne.png" alt="wind_melbourne.png" />
</p>
</div>

<div class="org-src-container">
<pre class="src src-shell">cp -rfv ./images/* ../public/images/
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org919c9a2" class="outline-2">
<h2 id="org919c9a2"><span class="section-number-2">6.</span> Referencias</h2>
<div class="outline-text-2" id="text-6">
<ul class="org-ul">
<li><a href="https://emacs.stackexchange.com/questions/28715/get-pandas-data-frame-as-a-table-in-org-babel">Presentar DataFrame como tabla en Emacs Org</a></li>
<li><a href="https://orgmode.org/worg/org-contrib/babel/languages/ob-doc-python.html">Python Source Code Blocks in Org Mode</a></li>
<li><a href="https://systemcrafters.net/publishing-websites-with-org-mode/building-the-site/">Systems Crafters: Construir tu sitio web con Modo Emacs Org</a></li>
<li><a href="https://iabigdata-soka-4ae9e223e32444ac5ae3d78afbd55fd9aa6da1c19d9679bf.gitlab.io/post/2024-06-06-pia_openweathermap_ex/">Ejemplo de consulta al API de OpenWeatherMap</a></li>
<li><a href="https://www.geeksforgeeks.org/python/python-find-current-weather-of-any-city-using-openweathermap-api/">GeeksforGeeks: Encontrar el clima de cualquier ciudad usando Python</a></li>
<li><a href="https://stackoverflow.com/questions/59033793/how-to-execute-a-python3-script-in-a-bash-script">Stack Overflow: Cómo ejecutar un script de Python3 en un script de Bash</a></li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Fecha: 2025-07-30</p>
<p class="author">Autor: Felipe Merino y Uriel Dueñas</p>
<p class="date">Created: 2025-08-04 Mon 13:51</p>
</div>
</body>
</html>
